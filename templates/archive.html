{% extends "index.html" %}

{%- block title -%}
{{ title_macros::title(page_title="آرشیو مطالب", main_title=config.title) }}
{%- endblock -%}

{% block content %}
    <div class="post">
        <h1 class="post-title">📚 آرشیو مطالب</h1>
        
        <div class="archive-description">
            <p>در اینجا تمام مطالب منتشر شده در بلاگ را به ترتیب زمانی مشاهده می‌کنید. از جدیدترین مطالب شروع کنید و به گذشته سفر کنید!</p>
        </div>

        {% set section = get_section(path="_index.md") %}
        
        {% if section.pages %}
        <div class="archive-stats">
            <div class="stat-item">
                <span class="stat-number">{{ section.pages | length }}</span>
                <span class="stat-label">مطلب منتشر شده</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ section.pages | map(attribute="date") | sort | first | date(format="%Y") }}</span>
                <span class="stat-label">سال شروع</span>
            </div>
        </div>

        <div class="posts-timeline">
            {% for page in section.pages %}
            <div class="timeline-item">
                <div class="timeline-date">
                    <span class="date-day">{{ page.date | date(format="%d") }}</span>
                    <span class="date-month">{{ page.date | date(format="%b") }}</span>
                    <span class="date-year">{{ page.date | date(format="%Y") }}</span>
                </div>
                <div class="timeline-content">
                    <h3 class="post-title">
                        <a href="{{ page.permalink | safe }}">{{ page.title }}</a>
                    </h3>
                    {% if page.description %}
                    <p class="post-description">{{ page.description }}</p>
                    {% endif %}
                    {% if page.taxonomies.tags %}
                    <div class="post-tags">
                        {% for tag in page.taxonomies.tags %}
                        <span class="tag">
                            <a href="{{ get_taxonomy_url(kind="tags", name=tag) | safe }}">#{{ tag }}</a>
                        </span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="no-posts">
            <p>هنوز هیچ مطلبی منتشر نشده است.</p>
        </div>
        {% endif %}
    </div>

    <style>
        .archive-description {
            margin-bottom: 2rem;
            padding: 1rem;
            background: var(--accent-alpha-20);
            border-radius: 8px;
            border-left: 4px solid var(--accent);
        }

        .archive-stats {
            display: flex;
            gap: 2rem;
            margin: 2rem 0;
            padding: 1.5rem;
            background: var(--background);
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            display: block;
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .posts-timeline {
            margin-top: 2rem;
        }

        .timeline-item {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--background);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .timeline-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--accent-alpha-20);
            border-color: var(--accent);
        }

        .timeline-date {
            flex-shrink: 0;
            text-align: center;
            padding: 1rem;
            background: var(--accent-alpha-20);
            border-radius: 8px;
            min-width: 80px;
        }

        .date-day {
            display: block;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent);
        }

        .date-month {
            display: block;
            font-size: 0.8rem;
            text-transform: uppercase;
            opacity: 0.7;
        }

        .date-year {
            display: block;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-content .post-title {
            margin: 0 0 0.5rem 0;
        }

        .timeline-content .post-title a {
            color: var(--color);
            text-decoration: none;
        }

        .timeline-content .post-title a:hover {
            color: var(--accent);
        }

        .post-description {
            margin: 0.5rem 0;
            opacity: 0.8;
            font-style: italic;
        }

        .post-tags {
            margin-top: 0.5rem;
        }

        .tag {
            display: inline-block;
            margin-right: 0.5rem;
            margin-bottom: 0.25rem;
        }

        .tag a {
            padding: 0.25rem 0.5rem;
            background: var(--accent-alpha-20);
            color: var(--accent);
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .tag a:hover {
            background: var(--accent);
            color: var(--background);
        }

        .no-posts {
            text-align: center;
            padding: 3rem;
            opacity: 0.6;
        }

        @media (max-width: 768px) {
            .archive-stats {
                flex-direction: column;
                gap: 1rem;
            }

            .timeline-item {
                flex-direction: column;
                gap: 1rem;
            }

            .timeline-date {
                align-self: flex-start;
                min-width: auto;
            }
        }
    </style>
{% endblock content %}
